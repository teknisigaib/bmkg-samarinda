// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

// prisma/schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL") // Ini akan baca Port 6543
  directUrl = env("DIRECT_URL")   // Ini akan baca Port 5432
}

// ------------------------------------
// Tabel 1: Berita & Kegiatan
// ------------------------------------
model Post {
  id          String   @id @default(cuid()) // ID unik otomatis (cth: clh123...)
  title       String
  slug        String   @unique // URL harus unik
  category    String   // 'Berita', 'Kegiatan', 'Edukasi'
  content     String   @db.Text // Isi HTML panjang
  excerpt     String   // Ringkasan
  imageUrl    String?  // Link gambar (Opsional/Boleh kosong ditandai ?)
  author      String   @default("Admin")
  isFeatured  Boolean  @default(false)
  createdAt   DateTime @default(now()) // Tanggal otomatis saat dibuat
  updatedAt   DateTime @updatedAt      // Tanggal otomatis saat diedit

  @@map("posts") // Nama tabel di database nanti jadi 'posts' (huruf kecil)
}

// ------------------------------------
// Tabel 2: Publikasi (Buletin, Artikel, Makalah)
// ------------------------------------
model Publication {
  id        String   @id @default(cuid())
  type      String   // 'Buletin', 'Artikel', 'Makalah'
  title     String
  slug      String?  @unique // Opsional, Buletin mungkin tidak butuh slug halaman detail
  author    String   @default("Tim BMKG")
  year      String   // '2024', '2023'
  edition   String?  // Khusus Buletin ('November')
  abstract  String?  @db.Text // Ringkasan (Makalah/Artikel)
  tags      String[] // Array: ["Iklim", "Radar"] (Fitur keren Postgres)
  coverUrl  String?  // Link Cover Gambar
  pdfUrl    String   // Link File PDF (Wajib)
  createdAt DateTime @default(now())

  @@map("publications")
}

// ------------------------------------
// Tabel 3: Iklim
// ------------------------------------
model ClimateData {
  id        String   @id @default(cuid())
  type      String   // 'HTH', 'HujanDasarian', 'HujanBulanan', 'PotensiBanjir'
  title     String   // Judul
  period    String   // Detail Tanggal: "21 - 30 November 2024"
  dasarian  String   // "Dasarian III"
  bulan     String   // "November 2024"
  content   String   @db.Text // Analisis
  imageUrl  String   // Peta
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("climate_data")
}